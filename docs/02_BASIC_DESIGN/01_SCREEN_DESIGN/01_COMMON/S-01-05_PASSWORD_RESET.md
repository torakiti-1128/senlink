# S-01-05 パスワード再設定

## 1. 概要
- 対象ロール：ALL
- 目的：メールアドレス宛にOTPを送信し、OTP認証後に新しいパスワードを設定する。
- 遷移元：
  - S-01-02（ログイン）から「パスワード再設定」
- 遷移先：
  - OTP入力：S-01-04（OTP認証）
  - 再設定完了後：S-01-02（ログイン）

## 2. 画面構成
- メイン領域：
  - ステップ1：メールアドレス入力（OTP要求）
  - ステップ2：OTP認証（S-01-04で実施）
  - ステップ3：新パスワード入力（再設定更新）
- フッター：あり
※ヘッダーは非表示（または、ロゴのみ）

## 3. 表示項目
- ステップ1（OTP要求）
  - 入力：メールアドレス
  - ボタン：OTP送信
- ステップ3（新パスワード設定）
  - 入力：新パスワード
  - 入力：新パスワード（確認）
  - ボタン：再設定実行
- エラーメッセージ（概要レベルで可）
  - メールアドレス形式不正
  - 対象アカウントが存在しない
  - OTP不一致／期限切れ
  - パスワード要件違反
  - 学外アクセス（学内IP制限）：S-01-01へ

## 4. 操作
- OTP送信（ステップ1）
  - メールアドレスを入力してOTP送信を実行
  - 成功時：S-01-04（OTP認証）へ遷移
- パスワード再設定（ステップ3）
  - OTP認証済みであることを前提に、新パスワードを設定する
  - 成功時：S-01-02（ログイン）へ遷移
- ログインへ戻る（任意）
  - S-01-02へ遷移

## 5. 関連API
- パスワード再設定（OTP要求）
  - POST /api/v1/auth/password/reset/otp/request
- パスワード再設定（OTP検証）
  - POST /api/v1/auth/password/reset/otp/verify
  ※ OTP入力画面（S-01-04）で実行
- パスワード再設定（更新）
  - POST /api/v1/auth/password/reset

## 6. 補足
- 本画面は3ステップのフローだが、UI構成は以下いずれでもよい（実装都合で選択）。
  - A）S-01-05内でステップ1とステップ3を持ち、OTP入力はS-01-04へ委譲
  - B）S-01-05を「メール入力専用」にし、OTP後の新パスワード設定を別画面に分離（必要ならS-01-05-2等を新設）
- OTP認証（S-01-04）の成功後に「再設定許可状態」を保持する必要がある（再設定許可トークン等の方式はAuth設計に従う）。

# チケットおよびブランチのルール

本プロジェクト（SenLink）では、品質と追跡性を担保するため、チケット駆動開発およびGit Flowベースのブランチ戦略を採用します。すべてのコード変更は、必ずGitHub Issue（チケット）に紐付けて行います。

## 1. ブランチ戦略

本番環境の安定性を守るため、直接 `main` ブランチへコミットすることは禁止し、以下のブランチ運用を行います。

| ブランチ名 | 役割・ルール |
| :--- | :--- |
| **`main`** | **本番環境用（リリース版）**<br>常にデプロイ可能で正常に動作する状態を保つ神聖なブランチ。直接のコミットは禁止。`dev` からのPull Request（PR）のみ受け付ける。 |
| **`dev`** | **開発・統合用（メインの開発軸）**<br>開発の主軸となるブランチ。各機能の実装やバグ修正は、このブランチから派生させ、完了後にこのブランチへPRを出してマージする。 |
| **`feature/xxx`**<br>**`bugfix/xxx`** | **作業用ブランチ（チケット対応）**<br>`dev` から分岐させて作成する。`xxx` の部分には Issue番号や短い英単語を含める。（例: `feature/1-infra-setup`） |

---

## 2. チケット（Issue）の命名規則

一覧性を高め、作業内容をひと目で把握できるように、Issueのタイトルは以下のフォーマットで統一します。

**【種別】対象ドメイン：作業内容**

### 種別プレフィックス
* `【インフラ】` : サーバー構築、Docker設定、CI/CD構築など
* `【設計】` : アーキテクチャ設計、DB設計、API定義など
* `【機能追加】` : 新規機能の実装（フロントエンド／バックエンド問わず）
* `【バグ修正】` : 既存機能の不具合修正
* `【リファクタ】` : 外部の振る舞いを変えずに内部コードを改善する作業
* `【ドキュメント】` : READMEや設計書などの作成・更新

### タイトル命名例
モジュラーモノリス構成のため、バックエンドの作業時は対象ドメイン（Auth, School, Jobなど）を明記します。

* `【インフラ】Dockerコンテナ環境およびC#初期ソリューションのセットアップ`
* `【設計】DB：Supabaseの初期テーブル定義（User, School）`
* `【機能追加】Auth：JWTを利用したログインAPIの実装`
* `【バグ修正】Job：求人検索時にN+1問題が発生している件の修正`

---

## 3. 基本的な開発フロー

1. **Issueの作成**
   - 上記の命名規則に従い、GitHub上でIssueを作成する。
   - 目的、作業内容（タスクリスト）、完了条件を明記する。
2. **作業ブランチの作成**
   - ローカルの `dev` ブランチを最新化し、Issue番号を含めたブランチを作成する。
   - コマンド例: `git checkout dev && git pull` -> `git checkout -b feature/1-infra-setup`
3. **実装とコミット**
   - 小まめにコミットを行う。
   - コミットメッセージには必要に応じてIssue番号を含める。（例: `feat: docker-composeの追加 (#1)`）
4. **Pull Request (PR) の作成**
   - 作業が完了したらGitHubへPushし、`dev` ブランチに向けてPRを作成する。
   - PRの本文に `Closes #1` と記載し、Issueを自動クローズさせる。
5. **レビューとマージ**
   - 静的解析（Linter/Formatter）やテスト（CI）をパスしていることを確認し、`dev` へマージする。